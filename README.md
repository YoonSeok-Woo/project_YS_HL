# Final PJT

------



### 1. 프로젝트 컨셉

------

장르 기반의 추천 서비스

유저가 보고 평점을 남긴 영화를 기준으로 장르를 선정



### 2. 구조 및 사용 기술

------

- Django를 사용하여 서버를 구성
- Django의 ORM을 활용하여 데이터베이스를 관리
- JavaScript에서 axios를 활용하여 검색 및 페이지 이동시 페이지 리로드를 하지 않고 QuerySet을 받아 부분적으로 갱신함



### 3. 팀원 및 역할 분담

------

팀장 : 윤홍림 - Front / Django, html, css

팀원 : 우윤석 - Back / Django, Algorithm, JavaScript



### 4. 데이터베이스 모델링(ERD)

------

![image-20211125145602533](../../assets/images/README/image-20211125145602533.png)



### 5. DATABASE

------

- TMDB의 API를 사용

- TMDB의 API 중 Top Rated데이터를 50페이지까지 활용

- TMDB의 Genres data 또한 참고하여 활용
- update.py 실행 시 해당 API에서 영화 데이터를 가져와서 movie.json에 저장
- python manage.py loaddata ./movie/fixtures/movie.json 명령어 실행



### 6-1. USER

------

- 회원가입, 로그인, 로그아웃 기능 구현
  - AbstractUser모델을 상속받아 사용

- 회원 가입 기능 : CustomForm을 사용하여 회원가입할 때 필요한 부분만 출력되도록 변경
- 로그인 기능 : Bootstrap Form을 사용하여 꾸밈
- 로그인, 로그아웃, 회원가입 버튼
  - 로그인, 회원가입, 로그아웃 버튼은 어느 페이지에서도 볼 수 있도록 상단 NavBar에 배치하였다.



### 6-2. COMMUNITY

------

- 유저들이 게시글과 댓글을 통해 소통을 나누는 공간
- 영화 정보 사이트이니 영화 스크린샷 업로드가 가능하도록 이미지 첨부도 가능하게 했다.
- Board
  - 커뮤니티 메인화면에서 사람들이 쓴 게시글들을 보기 편하게 Table로 만들어서 정리했다.
  - 작성자, 제목, 작성날짜 어디를 클릭하던 그 글이 작성된 detail로 넘어가게 해놓았고, 로그인한 유저라면 새글 작성이 가능하게 해놓았다.

- Detail
  - 게시글을 눌러 들어올 시 내용이 보이고 작성자인 경우 수정, 삭제가 가능하게 만들었다.
  - 댓글은 로그인한 유저라면 작성 가능하게 만들었고, 작성한 유저 본인이면 댓글을 삭제 가능하게 만들었다.



### 6-3. MOVIE

------

- Home 화면
  - JS를 사용하여 360도로 회전하는 이미지 슬라이드를 이용하여 무작위 영화 10개의 포스터를 슬라이드로 볼 수 있게 만들었다.

- 영화 추천 화면
  - 로그인한 유저가 평점을 등록한 영화가 10개 이상일 경우 가장 많이 본 장르를 추천해준다
  - 평점을 등록한 영화가 10개가 안될 경우 무작위로 추천해서 보여준다.

- 키워드 검색
  - 키워드를 입력하면, 해당 키워드가 줄거리나 제목에 있는 영화들을 출력하여 보여줍니다.

- 장르 검색
  - Bootstrap의 NavBar Dropdown 메뉴를 이용하여 jenre.json에 있는 모든 장르를 보여준다.
  - 장르 하나를 골라서 클릭하면 해당 장르의 영화를 모두 보여준다.
  - Pagination을 이용하여 한 페이지에 10개의영화가 보여지고, 페이지 이동이 가능하다.

- Detail 하면
  - 해당 영화의 영화 포스터와 제목, 장르, 줄거리, 평점이 출력되고, 로그인한 유저라면 해당 영화의 평점을 등록할 수 있습니다. 
  - 장르는 태그화 하여 해당 장르를 클릭하면 장르검색에서 클릭한 것처럼 해당 장르의 영화들을 출력하는 페이지로 넘어갑니다.



### 6-4. NavBar

------

- NavBar는 2개가 적용되었다.
  - 최상단 NavBar는 영화 사이트의 이름과 아이콘이 왼쪽에 배치되게 하였고, 오른쪽에는 로그인 한 유저라면 로그아웃 버튼이, 로그인하지 않은 유저라면 로그인 버튼과 회원가입 버튼이 출력되게 되어있다.
  - 그 밑의 NavBar는 Home, 커뮤니티, 영화 추천, 키워드 검색, 장르 검색에 해당하는 부분으로 클릭하면 넘어갈 수 있게 만들었다.







### 데이터베이스 업데이트 하는 방법

```
python update.py
python manage.py loaddata ./movie/fixtures/genres.json
python manage.py loaddata ./movie/fixtures/movie.json 
```


